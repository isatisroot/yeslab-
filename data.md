### 验证码：

访问方式： GET/captcha/{uuid}

请求参数：

| 参数 | 类型       | 说明           |
| ---- | ---------- | -------------- |
| uuid | uuid字符串 | 图片验证码编号 |

返回数据：

验证码图片`return HttpResponse(image, content_type="images/jpg")`

### 注册：

访问方式： POST/register

请求参数：

| 参数     | 类型   | 说明       |
| -------- | ------ | ---------- |
| username | 字符串 | 用户名     |
| password | 字符串 | 密码       |
| captcha  | 字符串 | 验证码     |
| uuid     | 字符串 | 验证码uuid |

返回数据：

| 返回值   | 类型               | 说明                   |
| -------- | ------------------ | ---------------------- |
| username | 字符串             | 用户名                 |
| user_id  | 字符串             | 用户id                 |
| token    | 字符串             | token                  |
| msg      | 字符串（注册失败） | 注册成功与失败文字说明 |

### 登陆：

访问方式： POST/login

请求参数：

| 参数     | 类型   | 说明   |
| -------- | ------ | ------ |
| username | 字符串 | 用户名 |
| password | 字符串 | 密码   |
| captcha  | 字符串 | 验证码 |

返回数据：

| 返回值   | 类型               | 说明                   |
| -------- | ------------------ | ---------------------- |
| username | 字符串             | 用户名                 |
| user_id  | 字符串             | 用户id                 |
| token    | 字符串             | token                  |
| msg      | 字符串（注册失败） | 注册成功与失败文字说明 |



### 获取展示预约数据

访问方式： GET/get_info/?date=2019-09-01

请求参数：

| 参数          | 类型                        | 是否必填 | 说明          |
| ------------- | --------------------------- | -------- | ------------- |
| date          | 字符串日期(2019-09-09)      | 是       | 日期          |
| Authorization | 字符串token('JWT ' + token) | 是       | 验证登陆token |
|               |                             |          |               |

返回数据：

| 返回值 | 类型 | 说明                                            |
| ------ | ---- | ----------------------------------------------- |
| 数组   | json | 当日数据（长度为16，每一个为一个时间段的数据 ） |
|        |      |                                                 |
|        |      |                                                 |
|        |      |                                                 |

数组类型

| 字段        | 类型               | 是否必须存在 | 说明         |
| ----------- | ------------------ | ------------ | ------------ |
| id          | 字符串             | 否           | 数据库对应id |
| date        | 字符串             | 否           | 日期         |
| useid       | 字符串             | 否           | 用户id       |
| tb_id       | 字符串（1-16）     | 是           | 时间段       |
| time_bucket | 字符串 (8:00-9:00) | 是           | 时间段字符串 |

```javascript
[
{"id":10,"date":"2019-9-10","userid":"10","tb_id":1,"time_bucket":"0:00-1:00"},
{"id":10,"date":"2019-9-10","userid":"12","tb_id":2,"time_bucket":"1:30-2:30"},
{"tb_id":3,"time_bucket":"3:00-4:00"},
{"tb_id":4,"time_bucket":"4:30-5:30"},
{"tb_id":5,"time_bucket":"6:00-7:00"},
{"tb_id":6,"time_bucket":"7:30-8:30"},
{"id":10,"date":"2019-9-10","userid":"10","tb_id":7,"time_bucket":"9:00-10:00"},
{"id":10,"date":"2019-9-10","userid":"14","tb_id":8,"time_bucket":"10:30-11:30"},
{"tb_id":9,"time_bucket":"12:00-13:00"},
{"tb_id":10,"time_bucket":"13:30-14:00"},
{"tb_id":11,"time_bucket":"14:30-15:00"},
{"id":10,"date":"2019-9-10","userid":"10","tb_id":12,"time_bucket":"15:30-16:30"},
{"tb_id":13,"time_bucket":"17:00-18:00"},
{"tb_id":14,"time_bucket":"18:30-19:30"},
{"tb_id":15,"time_bucket":"20:00-21:00"},
{"id":10,"date":"2019-9-10","userid":"16","tb_id":16,"time_bucket":"21:30-22:30"},
]
```



### 预约提交

访问方式： POST/sub_rv/

请求参数：

| 参数  | 类型                   | 是否必填 | 说明       |
| ----- | ---------------------- | -------- | ---------- |
| date  | 字符串日期(2019-09-09) | 是       | 日期       |
| tb_id | 字符串(1-16)           | 是       | 预约时间段 |
|       |                        |          |            |

返回数据：

跟  上面  **获取展示预约数据**  一样



### 用户预约展示

访问方式： GET/get_reservation/

请求参数：

| 参数 | 类型 | 是否必填 | 说明 |
| ---- | ---- | -------- | ---- |
| 无   |      |          |      |
|      |      |          |      |
|      |      |          |      |

返回数据：

| 返回值 | 类型 | 说明                                            |
| ------ | ---- | ----------------------------------------------- |
| 数组   | json | 当日数据（长度为16，每一个为一个时间段的数据 ） |

数组类型

| 字段  | 类型   | 是否必须存在 | 说明         |
| ----- | ------ | ------------ | ------------ |
| id    | 字符串 | 是           | 数据库对应id |
| date  | 字符串 | 是           | 日期         |
| useid | 字符串 | 是           | 用户id       |
| tbs   | 数组   | 是           | 时间段       |
|       |        |              |              |

| tbs字段     | 类型               | 是否必须存在 | 说明         |
| ----------- | ------------------ | ------------ | ------------ |
| tb_id       | 字符串(1-16)       | 是           | 时间段       |
| time_bucket | 字符串 (8:00-9:00) | 是           | 时间段字符串 |



```javascript
[
{"id":10,"date":"2019-9-10","uesrid":10,"tbs":[{"tb_id":1,time_bucket:"8:00-9:00"},{"tb_id":3,time_bucket:"11:00-12:00"}]},
{"id":13,"date":"2019-9-11","uesrid":10,"tbs":[{"tb_id":1,time_bucket:"8:00-9:00"},{"tb_id":3,time_bucket:"11:00-12:00"}]},
{"id":16,"date":"2019-9-12","uesrid":10,"tbs":[{"tb_id":1,time_bucket:"8:00-9:00"},{"tb_id":3,time_bucket:"11:00-12:00"}]},
],
```

### 取消预约

访问方式： POST/cancel_rv/

请求参数：

| 参数  | 类型   | 是否必填 | 说明             |
| ----- | ------ | -------- | ---------------- |
| date  | 字符串 | 是       | 取消预约日期     |
| tb_id | 字符串 | 是       | 取消预约赶时间段 |

返回数据：

跟  上面  **用户预约展示**  一样



## 预约表（reservation）

| 字段   | 类型     | 说明                     |
| ------ | -------- | ------------------------ |
| id     | int      | id                       |
| date   | date     | 预约日期                 |
| userid | int      | 用户id,关联用户表        |
| tb_id  | smallint | 预约时段（一天16个时段） |



